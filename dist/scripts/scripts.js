angular.module("templates",[]).run(["$templateCache",function(e){e.put("auth/templates/modal.html",'<form name="form" class="col-md-8 col-md-offset-2 form-auth" novalidate=""><button type="button" class="btn btn-default pick-right" data-ng-click="auth.cancel()"><span class="fa fa-times"></span></button><div data-ng-if="global.current.signin"><div class="modal-header"><h3 class="text-left"><span class="fa fa-sign-in"></span> Sign In</h3></div><div class="modal-body"><div class="form-group"><input tabindex="1" type="email" name="email" placeholder="Email" class="form-control" required="required" data-ng-model="auth.data.email" data-user-feedback=""></div><div class="form-group"><input tabindex="2" type="password" name="password" placeholder="Password" class="form-control" required="required" data-ng-minlength="5" data-ng-maxlength="15" data-ng-model="auth.data.password" data-user-feedback=""></div></div><div class="modal-footer"><div class="form-group form-no-required clearfix"><div class="pull-right"><button tabindex="3" type="button" class="btn btn-default" data-ng-click="global.show(\'register\')">Register</button> <button tabindex="4" type="submit" class="btn btn-primary" data-ng-click="auth.signin()">Sign In</button></div></div><div class="text-center" show-errors="" errors="global.errors"></div></div></div><div data-ng-if="global.current.register"><div class="modal-header"><h3 class="text-left"><span class="fa fa-user"></span> Register</h3></div><div class="modal-body"><div class="form-group"><input type="text" tabindex="1" name="username" placeholder="Username" class="form-control" required="required" data-ng-minlength="3" data-ng-maxlength="10" data-ng-model="auth.data.username" data-user-feedback=""></div><div class="form-group"><input type="email" tabindex="2" name="email" placeholder="Email" class="form-control" required="required" data-ng-model="auth.data.email" data-user-feedback=""></div><div class="form-group"><input type="password" tabindex="3" name="password" placeholder="Password" class="form-control" required="required" data-ng-minlength="8" data-ng-maxlength="20" data-ng-model="auth.data.password" data-user-feedback=""></div><div class="form-group"><input type="password" tabindex="4" name="password_confirmation" placeholder="Retype password" class="form-control" required="required" data-ng-minlength="8" data-ng-maxlength="20" password-equals="auth.data.password" data-ng-model="auth.data.password_confirmation" data-user-feedback=""></div></div><div class="modal-footer"><div class="form-group form-no-required clearfix"><div class="pull-right"><button type="button" class="btn btn-default" data-ng-click="global.show(\'signin\')">Sign In</button> <button tabindex="4" type="submit" class="btn btn-primary" data-ng-click="auth.register()">Register</button></div></div><div class="text-center" show-errors="" errors="global.errors"></div></div></div></form>'),e.put("core/templates/404.html",'<div class="container"><h2 class="page-error-status">404 <small>error</small></h2><h3 class="page-error-msg">Page Not Found</h3></div>'),e.put("core/templates/gmgrid.html",'<base target="_blank"><iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="/modules/gmgrid/gmgrid.html"></iframe><br>'),e.put("core/templates/index.html",'<div class="page"><div class="container"><div class="jumbotron"><h1><span class="fa fa-home"></span>Welcome</h1><h2>Test Test Test</h2><h3 show-version=""></h3><p data-ng-if="!global.isAuthenticated"><a href="" class="btn btn-lg btn-success" data-ui-sref="session.signin"><i class="fa fa-sign-in"></i> Sign In</a> <a href="" class="btn btn-lg btn-primary" data-ui-sref="session.register"><i class="fa fa-user"></i> Register</a></p><p data-ng-if="global.isAuthenticated"><i class="fa fa-user"></i> <span ng-bind="global.isAuthenticated.username"></span></p></div></div></div>'),e.put("core/templates/screenshot.html",'<div class="page"><div class="container" style="margin-top:0;padding-top:0;"><div class="jumbotron" style="margin:0;padding:0;text-align:center;"><img src="screenshots/{{screenshot.id}}.png" alt="{{screenshot.id}}"></div></div></div>'),e.put("core/templates/search.html",'<div class="page"><div class="container"><div class="jumbotron"><h1>Search</h1><h2>Test Test Test<a href="#">Inbox <span class="badge"><i class="fa fa-user"></i></span></a></h2><p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p><p><a class="btn btn-lg btn-success" href="#" role="button">Sign up today</a></p></div></div></div>'),e.put("core/templates/show-errors.html",'<div class="form-group form-no-required" data-ng-if="errors"><p class="alert alert-danger repeat-animation-errors" data-ng-repeat="error in errors" data-ng-bind="error.msg"></p></div>'),e.put("core/templates/slider-info.html",'<div id="info"><h2>Hello Pageslide</h2><p>Put here whatever you want</p><button id="info-close" class="btn btn-lg btn-success">Close</button></div>'),e.put("core/templates/wrench.html",'<div class="page"><div class="container"><div class="jumbotron"><h1>Wrench</h1><h2>Test Test Test</h2><h>Marketing stuff!<p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet.</p><p><a class="btn btn-lg btn-success" href="#" role="button">Get started today</a></p></h></div></div></div>'),e.put("users/templates/index.html",""),e.put("users/templates/register.html",'<form name="form" class="col-md-4 col-md-offset-4 form-user" data-ng-submit="user.save()" novalidate=""><h3><span class="fa fa-sign-in"></span> Register</h3><div class="form-group"><input type="text" tabindex="1" name="username" placeholder="Username" class="form-control" required="required" data-ng-minlength="3" data-ng-maxlength="10" data-ng-model="user.data.username" data-user-feedback=""></div><div class="form-group"><input type="email" tabindex="2" name="email" placeholder="Email" class="form-control" required="required" data-ng-model="user.data.email" data-user-feedback=""></div><div class="form-group"><input type="password" tabindex="3" name="password" placeholder="Password" class="form-control" required="required" data-ng-minlength="8" data-ng-maxlength="20" data-ng-model="user.data.password" data-user-feedback=""></div><div class="form-group"><input type="password" tabindex="4" name="password_confirmation" placeholder="Retype password" class="form-control" required="required" data-ng-minlength="8" data-ng-maxlength="20" password-equals="user.data.password" data-ng-model="user.data.password_confirmation" data-user-feedback=""></div><div class="form-group form-no-required"><div class="text-right"><a data-ui-sref="session.signin">Sign in</a> <button tabindex="5" type="submit" class="btn btn-primary">Register</button></div></div><div show-errors="" errors="user.errors"></div></form>'),e.put("users/templates/session.html",'<div data-ui-view=""></div>'),e.put("users/templates/signin.html",'<form name="form" class="col-md-4 col-md-offset-4 form-user" data-ng-submit="user.save()" novalidate=""><h3><span class="fa fa-sign-in"></span> Sign In</h3><div class="form-group"><input tabindex="1" type="email" name="email" placeholder="Email" class="form-control" required="required" data-ng-model="user.data.email" data-user-feedback=""></div><div class="form-group"><input tabindex="2" type="password" name="password" placeholder="Password" class="form-control" required="required" data-ng-minlength="5" data-ng-maxlength="15" data-ng-model="user.data.password" data-user-feedback=""></div><div class="form-group form-no-required"><div class="text-right"><a data-ui-sref="session.register">Register</a> <button tabindex="3" type="submit" class="btn btn-primary">Sign In</button></div></div><div show-errors="" errors="user.errors"></div></form>')}]),function(){"use strict";function e(e,t,r,s,a){e.hashPrefix("!"),t.otherwise("/"),r.debugEnabled(a),s.useApplyAsync(!0)}function t(e){e.debug("App is running!")}angular.element(document).ready(function(){angular.bootstrap(document,["app"])}),e.$inject=["$locationProvider","$urlRouterProvider","$logProvider","$httpProvider","DEBUG"],t.$inject=["$log"],angular.module("app",["ngAnimate","anim-in-out","core","auth","users"]).config(e).run(t)}(),function(){"use strict";function e(e,t,r,s,a,n,o,i){t.global={},t.global.isModalOpen=!1,t.global.errors=[],e.onbeforeunload=function(){},t.$on("auth-unauthorized",function(){o.del(),n&&(t.global.isModalOpen=!0,a.open())}),t.$on("auth-forbidden",function(){o.del()}),t.$on("auth-is-authenticated",function(e,r){o.set(r),t.global.isAuthenticated=s.decodeToken(o.get())}),t.global.current={},t.global.current.signin=!0,t.global.current.register=!1,t.global.show=function(e){t.global.isModalOpen||(t.global.isModalOpen=!0,a.open()),angular.forEach(t.global.current,function(e,r){t.global.current[r]=!1}),t.global.current[e]=!0,t.global.errors.length=0};var l=o.get();l&&(l=s.decodeToken(l)),t.global.isAuthenticated=l,t.global.logout=function(){i.logout().then(function(){o.del(),delete t.global.isAuthenticated,r.go("home")})["catch"](function(){throw new Error("Sorry, something went so wrong")})},t.global.isOwner=function(e){return t.global.isAuthenticated?t.global.isAuthenticated.hasAdminRole?!0:t.global.isAuthenticated.id===e:!1},t.global.signin=function(){return n?void t.global.show("signin"):void r.go("session.signin")},t.global.register=function(){return n?void t.global.show("register"):void r.go("session.register")}}e.$inject=["$window","$rootScope","$state","jwtHelper","signinModal","HAS_MODAL_LOGIN","UserTokenStorage","Auth"],angular.module("auth",["ui.bootstrap","ngStorage","angular-jwt","auth.services","auth.controllers","auth.routes"]).run(e)}(),function(){"use strict";angular.module("core",["ui.router","templates","core.services","core.directives","core.controllers","core.routes"])}(),function(){"use strict";angular.module("users",["ui.router","templates","users.services","users.directives","users.controllers","users.routes"])}(),function(){"use strict";function e(e,t,r){var s=this;s.data={},s.signin=function(){r.signin(s.data).then(function(e){t.close(e.data)})["catch"](function(t){alert(t.data),e.global.errors=t.data})},s.register=function(){r.register(s.data).then(function(e){t.close(e.data)})["catch"](function(t){e.global.errors=t.data})},s.forgot=function(){r.forgot(s.data).then(function(e){t.close(e.data)})["catch"](function(t){e.global.errors=t.data})},s.cancel=function(){e.global.isModalOpen=!1,t.dismiss("cancel")}}e.$inject=["$rootScope","$modalInstance","Auth"],angular.module("auth.controllers",[]).controller("SigninModalController",e)}(),function(){"use strict";function e(e,t){e.state("auth",{"abstract":!0,template:"<ui-view/>",resolve:{auth:["Auth",function(e){return e.isLoggedIn()}]}}),t.interceptors.push("HttpInterceptor")}e.$inject=["$stateProvider","$httpProvider"],angular.module("auth.routes",[]).config(e)}(),function(){"use strict";function e(e){return{isLoggedIn:function(){return e.get("/auth/isloggedin")},hasValidToken:function(){return e.get("/auth/hasvalidtoken")},signin:function(t){return e.post("/auth/signin",t)},register:function(t){return e.post("/auth/register",t)},logout:function(){return e.get("/auth/logout")}}}function t(e){return{set:function(t){e.token=t},get:function(){return e.token},del:function(){e.$reset()}}}function r(e,t,r){function s(t){e.$emit("auth-is-authenticated",t.token)}function a(){}return{open:function(){var e=t.open({template:r.get("auth/templates/modal.html"),controller:"SigninModalController",controllerAs:"auth",size:"lg"});return e.result.then(s)["catch"](a)}}}function s(e,t,r){return{request:function(e){var t=r.get();return e.requestTimestamp=(new Date).getTime(),e.headers=e.headers||{},t&&(e.headers.Authorization="Bearer "+t),e},response:function(e){return e.config.responseTimestamp=(new Date).getTime(),e},responseError:function(r){return 401===r.status&&e.$emit("auth-unauthorized",r),403===r.status&&e.$emit("auth-forbidden",r),503===r.status&&e.$emit("auth-unauthorized",r),t.reject(r)}}}var a=!0;e.$inject=["$http"],t.$inject=["$sessionStorage"],r.$inject=["$rootScope","$modal","$templateCache"],s.$inject=["$rootScope","$q","UserTokenStorage"],angular.module("auth.services",[]).constant("HAS_MODAL_LOGIN",a).factory("Auth",e).factory("UserTokenStorage",t).factory("HttpInterceptor",s).factory("signinModal",r)}(),function(){"use strict";function e(){}function t(){}function r(){}function s(){}function a(){}function n(e,t,r){var s=this;s.screenShot=function(){var s=e.absUrl();t.post("/auth/screenshot",{url:s}).then(function(e){r.go("screenshot",{id:e.data.id})})["catch"](function(){console.log("error")}),console.log(s)}}function o(e){var t=this;t.id=e.id,console.log(t.id)}n.$inject=["$location","$http","$state"],o.$inject=["$stateParams"],angular.module("core.controllers",[]).controller("CoreController",e).controller("GmgridController",t).controller("SearchController",r).controller("WrenchController",s).controller("SegretController",a).controller("CameraController",n).controller("ScreenshotController",o)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,r){r.text("Version: "+e)}}}function t(){return{require:"ngModel",restrict:"A",link:function(e,t,r,s){var a=t.parent();t.on("blur",function(){var e=a.attr("class"),t=e.split(" "),r=t.length;if(r>1)for(var n=0;r>n;n++)a.removeClass(t[n]);a.addClass(t[0]),a.addClass(s.$valid?"has-success":"has-error")})}}}function r(e){return{restrict:"AE",scope:{errors:"="},template:e.get("core/templates/show-errors.html"),link:function(){}}}function s(e,t){return{restrict:"EA",replace:!1,transclude:!1,scope:{psOpen:"=?"},link:function(r,s,a){function n(e,t){if(0!==e.style.width)switch(content.style.display="none",t.side){case"right":e.style.width="0px";break;case"left":e.style.width="0px";break;case"top":e.style.height="0px";break;case"bottom":e.style.height="0px"}r.psOpen=!1}function o(e,t){if(0!==e.style.width){switch(t.side){case"right":e.style.width=t.size;break;case"left":e.style.width=t.size;break;case"top":e.style.height=t.size;break;case"bottom":e.style.height=t.size}setTimeout(function(){e.style.display="block",content.style.display="block"},1e3*t.speed)}}var i=!1,l={};l.side=a.pageslide||"right",l.speed=a.psSpeed||"0.5",l.size=a.psSize||"300px",l.className=a.psClass||"ng-pageslide";var c=s;if(c.append(t.get("core/templates/slider-info.html")),content=document.getElementById(a.psTarget.substr(1)),console.log(content),!content)throw new Error("You have to elements inside the <pageslide> or you have not specified a target href");var u=document.createElement("div");switch(u.className=l.className,u.style.transitionDuration=l.speed+"s",u.style.webkitTransitionDuration=l.speed+"s",u.style.zIndex=1e3,u.style.position="fixed",u.style.display="none",u.style.transitionProperty="width, height",l.side){case"right":u.style.top=a.psCustomTop||"0px",u.style.bottom=a.psCustomBottom||"0px",u.style.right=a.psCustomRight||"0px";break;case"left":u.style.top=a.psCustomTop||"0px",u.style.bottom=a.psCustomBottom||"0px",u.style.left=a.psCustomLeft||"0px";break;case"top":u.style.left=a.psCustomLeft||"0px",u.style.top=a.psCustomTop||"0px",u.style.right=a.psCustomRight||"0px";break;case"bottom":u.style.bottom=a.psCustomBottom||"0px",u.style.left=a.psCustomLeft||"0px",u.style.right=a.psCustomRight||"0px"}document.body.appendChild(u),u.appendChild(content),r.$watch("psOpen",function(e){e?o(u,l):n(u,l)}),e.$on("$locationChangeStart",function(){n(u,l)}),e.$on("$stateChangeStart",function(){n(u,l)}),r.$on("$destroy",function(){document.body.removeChild(u)});var d=document.getElementById(a.psTarget.substr(1)+"-close");s.on("click",function(e){e.preventDefault(),i?(n(u,l),i=!1):(o(u,l),i=!0)}),d&&d.addEventListener("click",function(e){e.preventDefault(),n(u,l)})}}}function a(){return{restrict:"A",scope:{bartype:"@"},link:function(e,t){var r=angular.element(document.getElementById("bar-right")),s=angular.element(document.getElementById("bar-left"));t.on("mouseenter",function(){s.addClass("slide-out-left"),r.addClass("slide-out-right")}),t.on("mouseleave",function(){r.removeClass("slide-out-right"),s.removeClass("slide-out-left")})}}}e.$inject=["VERSION"],r.$inject=["$templateCache"],s.$inject=["$rootScope","$templateCache"],angular.module("core.directives",[]).directive("showVersion",e).directive("userFeedback",t).directive("showErrors",r).directive("pageslide",s).directive("sliderBar",a)}(),function(){"use strict";function e(e){e.state("home",{url:"/",templateUrl:"core/templates/index.html",controller:"CoreController as core"}).state("gmgrid",{url:"/gmgrid",templateUrl:"core/templates/gmgrid.html",controller:"GmgridController as gmgrid"}).state("search",{url:"/search",templateUrl:"core/templates/search.html",controller:"SearchController as search"}).state("wrench",{url:"/wrench",templateUrl:"core/templates/wrench.html",controller:"WrenchController as wrench"}).state("segret",{url:"/segret",templateUrl:"partials/segret",controller:"SegretController as segret"}).state("screenshot",{url:"/screenshot/:id",templateUrl:"core/templates/screenshot.html",controller:"ScreenshotController as screenshot"}).state("404",{url:"/404",templateUrl:"core/templates/404.html"})}e.$inject=["$stateProvider"],angular.module("core.routes",[]).config(e)}(),function(){"use strict";var e=!0,t="1.0.0";angular.module("core.services",[]).constant("DEBUG",e).constant("VERSION",t)}(),function(){"use strict";function e(){}function t(e,t,r){var s=this;s.data={},s.save=function(){r.signin(s.data).then(function(r){e.$emit("auth-is-authenticated",r.data.token),t.go("chat")})["catch"](function(e){s.errors=e.data})}}function r(e,t,r){var s=this;s.data={},s.errors=[],s.save=function(){r.register(s.data).then(function(r){e.$emit("auth-is-authenticated",r.data.token),t.go("chat")})["catch"](function(e){s.errors=e.data})}}t.$inject=["$rootScope","$state","Users"],r.$inject=["$rootScope","$state","Users"],angular.module("users.controllers",[]).controller("UserController",e).controller("UserSigninController",t).controller("UserRegisterController",r)}(),function(){"use strict";function e(){return{require:"ngModel",link:function(e,t,r,s){e.$watch(r.passwordEquals,function(){s.$validate()}),s.$validators.isEquals=function(t){var s=e.$eval(r.passwordEquals);return s&&t?t===s:!1}}}}angular.module("users.directives",[]).directive("passwordEquals",e)}(),function(){"use strict";function e(e){e.state("session",{"abstract":!0,templateUrl:"users/templates/session.html",resolve:{isjustlogged:["Users",function(e){return e.isjustlogged()}]}}).state("session.signin",{url:"/user/signin",templateUrl:"users/templates/signin.html",controllerAs:"user",controller:"UserSigninController"}).state("session.register",{url:"/user/register",templateUrl:"users/templates/register.html",controllerAs:"user",controller:"UserRegisterController"})}e.$inject=["$stateProvider","$httpProvider"],angular.module("users.routes",[]).config(e)}(),function(){"use strict";function e(e){return{isjustlogged:function(){return e.get("/auth/isjustlogged")},signin:function(t){return e.post("/auth/signin",t)},register:function(t){return e.post("/auth/register",t)},logout:function(){return e.get("/auth/logout")}}}e.$inject=["$http"],angular.module("users.services",[]).factory("Users",e)}();